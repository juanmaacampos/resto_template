<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test P√°gina Restaurante - Con Im√°genes</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; }
        .menu-item { border: 1px solid #ddd; margin: 10px; padding: 15px; border-radius: 8px; }
        .menu-item img { max-width: 200px; height: auto; border-radius: 4px; }
        .error { color: red; }
        .success { color: green; }
        .loading { color: #666; }
    </style>
</head>
<body>
    <h1>üçΩÔ∏è Test P√°gina Restaurante</h1>
    <div id="status"></div>
    <div id="menu-container"></div>

    <script type="module">
        // Simulamos el comportamiento de tu p√°gina del restaurante
        import { createMenuSDK } from './menu-sdk.js';
        import { MENU_CONFIG, validateConfig } from './config.js';

        const statusDiv = document.getElementById('status');
        const menuContainer = document.getElementById('menu-container');

        // Verificar configuraci√≥n
        if (!validateConfig()) {
            statusDiv.innerHTML = '<div class="error">‚ùå Configuraci√≥n incompleta</div>';
            throw new Error('Configuraci√≥n incompleta');
        }

        statusDiv.innerHTML = '<div class="success">‚úÖ Configuraci√≥n v√°lida</div>';

        // Crear SDK y probar conexi√≥n
        try {
            const menuSDK = createMenuSDK(MENU_CONFIG.firebaseConfig, MENU_CONFIG.restaurantId);
            statusDiv.innerHTML += '<div class="loading">üîÑ Conectando a Firebase...</div>';

            // Obtener informaci√≥n del restaurante
            const restaurant = await menuSDK.getRestaurantInfo();
            statusDiv.innerHTML += `<div class="success">‚úÖ Restaurante: ${restaurant.name}</div>`;

            // Obtener men√∫ completo
            statusDiv.innerHTML += '<div class="loading">üîÑ Cargando men√∫...</div>';
            const menu = await menuSDK.getFullMenu();
            statusDiv.innerHTML += `<div class="success">‚úÖ Men√∫ cargado: ${menu.length} categor√≠as</div>`;

            // Mostrar items con im√°genes
            let itemsWithImages = 0;
            let totalItems = 0;

            menu.forEach(category => {
                if (category.items && category.items.length > 0) {
                    const categoryDiv = document.createElement('div');
                    categoryDiv.innerHTML = `<h2>${category.name}</h2>`;
                    menuContainer.appendChild(categoryDiv);

                    category.items.forEach(item => {
                        totalItems++;
                        if (item.imageUrl) itemsWithImages++;

                        const itemDiv = document.createElement('div');
                        itemDiv.className = 'menu-item';
                        itemDiv.innerHTML = `
                            <h3>${item.name}</h3>
                            <p>${item.description || 'Sin descripci√≥n'}</p>
                            <p><strong>$${item.price}</strong></p>
                            ${item.imageUrl ? 
                                `<img src="${item.imageUrl}" alt="${item.name}" 
                                     onload="console.log('‚úÖ Imagen cargada:', '${item.name}')" 
                                     onerror="console.error('‚ùå Error cargando imagen:', '${item.name}', this.src)">` 
                                : '<p><em>Sin imagen</em></p>'
                            }
                        `;
                        menuContainer.appendChild(itemDiv);
                    });
                }
            });

            statusDiv.innerHTML += `<div class="success">‚úÖ ${itemsWithImages}/${totalItems} items tienen im√°genes</div>`;
            
            if (itemsWithImages > 0) {
                statusDiv.innerHTML += '<div class="success">üéâ ¬°Las im√°genes deber√≠an cargarse correctamente!</div>';
            }

        } catch (error) {
            statusDiv.innerHTML += `<div class="error">‚ùå Error: ${error.message}</div>`;
            console.error('Error completo:', error);
        }
    </script>
</body>
</html>
